var aeWidgetIframe,WIDGET_KEY="944904f5d9ddcfe57136d73460d512e0";function parseQueryString(e){var t={};return e.split("&").forEach(function(e){var n=e.split("=");0!==n[0].length&&n[1]&&(t[n[0]]=n[1])}),t}function encodeData(e){return Object.keys(e).map(function(t){return[t,e[t]].map(encodeURIComponent).join("=")}).join("&")}Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,i;if(null==this)throw new TypeError(" this is null or not defined");var s=Object(this),o=s.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),i=0;o>i;){var a;i in s&&(a=s[i],e.call(n,a,i,s)),i++}});var aeHandle=function(e,t,n,i){var s={params:{},open:function(e,n){s.params.hall_id=0,s.params.photosession_id=0,s.params.order_type="",n&&(s.params.hall_id=n.attr("hall_id")||0,s.params.photosession_id=n.attr("photosession_id")||0,s.params.order_type=n.attr("order_type")||""),(aeWidgetIframe=t.createElement("div")).className="aeWidgetIFrameDIV";var i=t.createElement("iframe");i.className="aeWidgetIFrame",i.src=r+"/widget?widget_key="+e+"&"+encodeData(s.params),aeWidgetIframe.appendChild(i),t.body.appendChild(aeWidgetIframe),o("body").addClass("aeWidgetParentActive")}},o=function(){var e=function(e){return new t(e)},t=function(e){var t;"string"==typeof e&&e.length>0?t="<"===e.substr(0,1)?n.create(e):n.find(document,e):"object"==typeof e&&null!==e&&(t=e),this.elements=[];var i=Object.prototype.toString.call(t);return t&&("[object HTMLCollection]"===i||"[object NodeList]"===i?this.elements=Array.prototype.slice.call(t):"[object Array]"===i?this.elements=t:"[SweetyElement]"===t.toString()?this.elements=t.elements:this.elements=[t]),this},n=e.fn={create:function(e){var t=document.createElement("div");return t.innerHTML=e,t.children},find:function(e,t){var n;switch(t.substr(0,1)){case".":n=e.getElementsByClassName(t.substr(1));break;case"#":n=e.getElementById(t.substr(1));break;case"@":n=e.getElementsByName(t.substr(1));break;default:n=e.getElementsByTagName(t)}return n},each:function(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n],n,e)},objEach:function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])},contains:function(e,t){return-1!==e.indexOf(t)},getClasses:function(e){return""===e.className?[]:e.className.split(/\s+/)},saveClasses:function(e,t){e.className=t.join(" ")},getStyles:function(e){var t=e.style.cssText.split(/;\s*/),n={};return this.each(t,function(e){var t=e.split(/:\s*/);2===t.length&&(n[t[0]]=t[1])}),n},saveStyles:function(e,t){var n=[];this.objEach(t,function(e,t){n.push(e+":"+t)}),e.style.cssText=n.join(";")}};return t.prototype={toArray:function(){return this.elements},findChild:function(t){return this.elements[0]?e(n.find(this.elements[0],t)):e()},findParent:function(t){if(!this.elements[0])return e();var i=this.elements[0];if(!t)return this.parent();if("."===t.substr(0,1))do{i=i.parentElement}while(!n.contains(n.getClasses(i),t.substr(1)));else do{i=i.parentElement}while(i.tagName.toUpperCase()!==t.toUpperCase());return e(i)},parent:function(){return this.elements[0]?e(this.elements[0].parentElement):e()},forEach:function(e){return n.each(this.elements,e),this},getProp:function(e){if(this.elements[0])return this.elements[0][e]},setProp:function(e,t){var i={};return"object"==typeof e?i=e:i[e]=t,this.forEach(function(e){n.objEach(i,function(t,n){e[t]=n})}),this},prop:function(e,t){return void 0!==t||"object"==typeof e?this.setProp(e,t):this.getProp(e)},getAttr:function(e){return this.elements[0]?this.elements[0].getAttribute(e):null},setAttr:function(e,t){var i={};return"[object Object]"===e.toString()?i=e:i[e]=t,this.forEach(function(e){n.objEach(i,function(t,n){e.setAttribute(t,n)})}),this},removeAttr:function(e){var t=[];return"object"==typeof e?t=e:t.push(e),this.forEach(function(e){n.each(t,function(t){e.removeAttribute(t)})}),this},hasAttr:function(e){return!!this.elements[0]&&this.elements[0].hasAttribute(e)},attr:function(e,t){return void 0!==t||"object"==typeof e?(this.setAttr(e,t),this):this.getAttr(e)},val:function(e){var t;return this.elements[0]&&"SELECT"===this.elements[0].tagName&&this.elements[0].multiple?void 0!==e?("string"==typeof e&&(e=e.split(" ")),this.findChild("option").forEach(function(t){n.contains(e,t.value)?t.selected=!0:t.selected=!1}),this):(t=[],this.findChild("option").forEach(function(e){e.selected&&t.push(e.value)}),t.length>0?t:null):this.elements[0]&&"INPUT"===this.elements[0].tagName&&"radio"===this.elements[0].type?void 0!==e?(this.forEach(function(t){t.value===e?t.checked=!0:t.checked=!1}),this):(t=null,this.forEach(function(e){e.checked&&(t=e.value)}),t):this.elements[0]&&"INPUT"===this.elements[0].tagName&&"checkbox"===this.elements[0].type?void 0!==e?("string"==typeof e&&(e=e.split(" ")),this.forEach(function(t){n.contains(e,t.value)?t.checked=!0:t.checked=!1}),this):(t=[],this.forEach(function(e){e.checked&&t.push(e.value)}),t.length>0?t:null):void 0!==this.prop("value")?this.prop("value",e):this.attr("value",e)},addClass:function(e){return"string"==typeof e&&(e=e.split(/\s+/)),this.forEach(function(t){var i=n.getClasses(t);n.each(e,function(e){-1===i.indexOf(e)&&i.push(e)}),n.saveClasses(t,i)}),this},removeClass:function(e){return"string"==typeof e&&(e=e.split(/\s+/)),this.forEach(function(t){var i=n.getClasses(t);n.each(e,function(e){var t=i.indexOf(e);-1!==t&&i.splice(t,1)}),n.saveClasses(t,i)}),this},hasClass:function(e){return!!this.elements[0]&&n.contains(n.getClasses(this.elements[0]),e)},toggleClass:function(e){return this.hasClass(e)?this.removeClass(e):this.addClass(e),this},addStyle:function(e,t){return this.forEach(function(i){var s=n.getStyles(i);void 0!==t?s[e]=t:"object"==typeof e&&n.objEach(e,function(e,t){s[e]=t}),n.saveStyles(i,s)}),this},removeStyle:function(e){return"string"==typeof e&&(e=[e]),this.forEach(function(t){var i=n.getStyles(t);n.each(e,function(e){delete i[e]}),n.saveStyles(t,i)}),this},css:function(e,t){return this.addStyle(e,t)},html:function(e){return void 0!==e?(this.empty().forEach(function(t){t.innerHTML=e}),this):this.elements[0]?this.elements[0].innerHTML:void 0},empty:function(){return this.forEach(function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}),this},append:function(e){return this.elements[0]&&e?("[SweetyElement]"===e.toString()?n.each(e.elements,function(e){this.elements[0].appendChild(e)}.bind(this)):this.elements[0].appendChild(e),this):this},remove:function(){this.forEach(function(e){e.parentNode.removeChild(e)}),this.elements=[]},on:function(e,t){return"string"==typeof e&&(e=e.split(" ")),n.each(e,function(e){this.forEach(function(n){n.addEventListener(e,t,!1),n.sweetyEvents=n.sweetyEvents||{},n.sweetyEvents[e]=n.sweetyEvents[e]||[],n.sweetyEvents[e].push(t)})}.bind(this)),this},off:function(e,t){return"string"==typeof e&&(e=e.split(" ")),n.each(e,function(e){this.forEach(function(n){t?n.removeEventListener(e,t,!1):n.sweetyEvents&&n.sweetyEvents[e]&&(n.sweetyEvents[e].forEach(function(t){n.removeEventListener(e,t,!1)}),n.sweetyEvents[e]=[])})}.bind(this)),this},exists:function(){return 0!==this.elements.length},toString:function(){return"[SweetyElement]"}},n.each(arguments,function(e){"object"==typeof e&&n.objEach(e,function(e,n){"function"==typeof n&&(t.prototype[e]=n)})}),e}(),a=parseQueryString(i.src.replace(/^[^\?]+\??/,""));s.params=a;var r="https://appevent.ru";a.url&&(r=a.url);void 0!==a.type&&a.type;o(".aeWidgetBtn").attr("href",`${r}/widget/landing?widget_key=${WIDGET_KEY}`).on("click",function(e){e.preventDefault(),s.open(WIDGET_KEY),o("body").css("overflow","hidden")}),o(".aeWidgetOpen").on("click",function(){s.open(o(this).attr("widget_key"),o(this))}),window.onmessage=function(e){"close_ae_widget"===e.data&&(console.log("Close widget"),aeWidgetIframe.remove(),o("body").removeClass("aeWidgetParentActive").css("overflow","auto"))}}(window,window.document,window.location,function(){return window.document.currentScript||(e=window.document.getElementById("aeWidgetScript"))||(e=window.document.getElementsByTagName("script"))[e.length-1];var e}()),$carouselContent=null,carouselIsAnimate=null,carouselIndex=null,carouselContentChild=null,carouselLength=null,carouselLastItem=null,carouselFirstItem=null,autoSlide=null,first_submenu_load=!0;function checkMobileTopPadding(){var e=$("#atm-navigation_mobile");"block"===e.css("display")?e.next("section").css("margin-top",e.height()):e.next("section").css("margin-top",0)}function hidePreload(){$("#preloader").fadeOut("slow",function(){$("body").css({overflow:"visible"}),startPage()})}function startPage(){$(".background-paralax .slogan").animate({opacity:"1"},700)}function autoRotateSlide(){autoSlide=setInterval(function(){slideRight()},2500)}function slideRight(){carouselIsAnimate||(carouselIsAnimate=!0,++carouselIndex>=carouselLength?(carouselContentChild.each(function(e){$(this).animate({left:e*$(this).width()},1e3,function(){carouselIsAnimate=!1})}),carouselIndex=0):carouselContentChild.each(function(e){$(this).animate({left:$(this).position().left-$(this).width()},1e3,function(){carouselIsAnimate=!1})}))}function slideLeft(e){carouselIsAnimate||(carouselIsAnimate=!0,--carouselIndex<0?(carouselContentChild.each(function(e){$(this).animate({left:$(this).position().left-(carouselLength-1)*$(this).width()},1e3,function(){carouselIsAnimate=!1})}),carouselIndex=carouselLength-1):carouselContentChild.each(function(e){$(this).animate({left:$(this).position().left+$(this).width()},1e3,function(){carouselIsAnimate=!1})}))}function slideTo(e,t){var n=e.find(".item");n.length;n.each(function(t,n){$(n).hasClass("active"),e.width(),$(n).position()})}function bindPlateEvents(){$(".plate_new").each(function(){$(this).css({"min-height":"286px",height:"286px","max-height":"286px"})})}$(document).ready(function(){hidePreload();$(window).scrollTop();var e=$(window).height(),t=($("#atm-header"),$("#atm-header-slogan-section .parallax-img"));($carouselContent=$("#scenery-carousel .content")).css({height:$carouselContent.width()/3}),carouselIsAnimate=!1,carouselIndex=0,carouselContentChild=$carouselContent.children(),carouselLength=carouselContentChild.length,carouselLastItem=carouselContentChild[carouselLength-1],carouselFirstItem=$carouselContent.children()[0],$(".carousel-control.left").on("click",function(e){slideLeft()}),$(".carousel-control.right").on("click",function(e){slideRight()}),$("#scenery-carousel").on("mouseover",function(){clearInterval(autoSlide)}).on("mouseout",function(){autoRotateSlide()}),autoRotateSlide();var n=e;$(window).on("resize",function(){e=$(window).height(),n=e,checkMobileTopPadding()});var i=[];$(".team-block-image").each(function(e){i.push([$(this),$(this).offset().top])}),$(window).scroll(function(s){var o=$(this).scrollTop();requestAnimationFrame(function(){var s;if(o<=n&&(s=o,t.css("top",.5*s+"px"),$(".aeWidgetBtn").css("display","none")),o>n&&$(".aeWidgetBtn").css("display","block"),i.length){var a=[];i.forEach(function(t,n){o+e/2>t[1]&&(t[0].animate({opacity:1},600),a.push(n))}),a.forEach(function(e){i.splice(e,1)})}}),o});var s=$(".atm-navigation__bg-img");s&&($navContainer=$(".atm-nav-container"),s.css({height:$navContainer[0].offsetHeight+20,width:$navContainer[0].offsetWidth+20,left:-(Number($navContainer.css("padding-left").replace("px",""))+10),display:"block"})),bindPlateEvents(),bindAjaxContentChange(),bindAjaxReservedForm(),$("body").on("click",function(e){if($(e.target).hasClass(".atm-overlay"))return $(".atm-overlay").remove(),$(".atm-reserved-form").remove(),void $("body").css("overflow","auto");$(".atm-nav_mobile").hasClass("active")&&$(".atm-nav_mobile").removeClass("active")}),$(".atm-menu-mobile__btn").on("click",function(e){e.preventDefault(),e.stopPropagation(),$(this).closest(".atm-nav-container_mobile").toggleClass("active"),$(".atm-under-menu-panel").toggleClass("active"),$(".atm-menu-submenu-btn_mobile").removeClass("active").next(".atm-menu-submenu_mobile").slideUp().end().children("i").removeClass("active")}),$(".atm-nav_mobile").on("click",function(e){e.stopPropagation()}),$(".atm-menu-submenu-btn_mobile").on("click",function(e){$(this).hasClass("active")?$(this).removeClass("active").next(".atm-menu-submenu_mobile").slideUp().end().children("i").removeClass("active"):$(this).addClass("active").next(".atm-menu-submenu_mobile").slideDown().end().children("i").addClass("active")}),checkMobileTopPadding()});var subMenuContentAction={graduations:{url:"/graduations/graduationschange/",default:"school",success:function(e){$("#graduations_images").html(e.html)}},sessions:{url:"/halls/sessionschange/",default:"family",success:function(e){$("#session").html(e.html),$("#title").html(e.title),$("#desc").html(e.desc)}},halls:{url:"/halls/hallschange/",default:"dark",success:function(e){$("#hall").html(e.html),$("#title").html(e.title),$("#desc").html(e.desc),$("#hallsize").html("Размер зала: "+e.hallsize+" кв.м."),$("#price").html("Стоимость аренды зала: <br>"+e.price+"руб./час")}}};function bindAjaxContentChange(){var e=window.location.pathname.replace(/\//g,"");e in subMenuContentAction&&(changeSubMenuContent(subMenuContentAction[e].default),$(".view").first().addClass("active").end().on("click",function(e){e.preventDefault(),$(".view").removeClass("active"),changeSubMenuContent.call(this)}))}function bindAjaxReservedForm(){$(".reserved-btn-scroolled").on("click",function(e){e.preventDefault(),$("html, body").stop().animate({scrollTop:$("#signup").offset().top},777)}),$(".reserved-btn").on("click",function(e){e.preventDefault(),$.ajax({type:"GET",url:"/reserved/form",dataType:"json",cache:!1,success:function(e){if("ok"===e.response){createOverlay();var t=$(e.html);t.appendTo("body");var n=t.outerHeight(),i=$(window).scrollTop();t.css({top:i-n,display:"block"}).find(".fa-times").one("click",function(){hideReservedForm()}).end().find(".atm-form__phone").mask("+7(999) 999-9999").end().animate({top:i},300),$("body").css("overflow","hidden"),$(".atm-reserved-form__form").submit(function(e){e.preventDefault(),e.stopPropagation();var t=$(this),n=$(".atm-reserved-form");$(this).serialize();return $(this).empty().append('<div class="atm-reserved-spinner"><i class="fas fa-spinner fa-spin"></i></div>'),setTimeout(function(){n.find(".atm-reserved-name").text("Сасибо!\nВы записаны"),n.append('<div class="atm-reserved-notification"><label>Наш Администратор вам перезвонит в ближайшее время и направит счёт на оплату на ваш e-mail</label></div>'),t.remove(),setTimeout(function(){hideReservedForm()},500)},1e3),!1})}}})})}function hideReservedForm(){var e=$(window).scrollTop(),t=$(".atm-reserved-form").outerHeight();$(".atm-overlay").fadeOut(300,function(){$(this).remove()}),$(".atm-reserved-form").animate({top:e-t},function(){$(this).remove()}),$("body").css("overflow","auto")}function createOverlay(){$("<div></div>").addClass("atm-overlay").appendTo("body").fadeIn(300)}function changeSubMenuContent(e){var t=window.location.pathname.replace(/\//g,"");if((e=e||$(this).attr("data-desc"))&&t in subMenuContentAction){$(this).addClass("active");var n=subMenuContentAction[t];$.ajax({type:"GET",url:n.url,data:{view:e},dataType:"json",cache:!1,success:function(e){"ok"==e.response&&(n.success(e),first_submenu_load?first_submenu_load=!1:$("html").animate({scrollTop:$(".atm-under-menu").offset().top},500))}})}}jQuery(document).ready(function(e){var t=document.location.href.split("://")[1].split("/")[1];e.ajax({type:"GET",url:"/"+t+"/",data:{view:t},dataType:"json",cache:!1,success:function(t){"ok"==t.response&&(e("#desc_image").attr("src",t.image_src),e("#title").html(t.title),e("#main_text").html(t.main_text))}})});