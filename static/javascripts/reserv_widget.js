var aeWidgetIframe,WIDGET_KEY="944904f5d9ddcfe57136d73460d512e0";function parseQueryString(e){var t={};return e.split("&").forEach(function(e){var n=e.split("=");0!==n[0].length&&n[1]&&(t[n[0]]=n[1])}),t}function encodeData(e){return Object.keys(e).map(function(t){return[t,e[t]].map(encodeURIComponent).join("=")}).join("&")}Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,s;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),r=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),s=0;r>s;){var o;s in i&&(o=i[s],e.call(n,o,s,i)),s++}});var aeHandle=function(e,t,n,s){var i={params:{},open:function(e,n){console.log("Open widget"),i.params.hall_id=0,i.params.photosession_id=0,i.params.order_type="",n&&(i.params.hall_id=n.attr("hall_id")||0,i.params.photosession_id=n.attr("photosession_id")||0,i.params.order_type=n.attr("order_type")||""),console.log(i.params),(aeWidgetIframe=t.createElement("div")).className="aeWidgetIFrameDIV";var s=t.createElement("iframe");s.className="aeWidgetIFrame",s.src=a+"/widget?widget_key="+e+"&"+encodeData(i.params),aeWidgetIframe.appendChild(s),t.body.appendChild(aeWidgetIframe),r("body").addClass("aeWidgetParentActive")}},r=function(){var e=function(e){return new t(e)},t=function(e){var t;"string"==typeof e&&e.length>0?t="<"===e.substr(0,1)?n.create(e):n.find(document,e):"object"==typeof e&&null!==e&&(t=e),this.elements=[];var s=Object.prototype.toString.call(t);return t&&("[object HTMLCollection]"===s||"[object NodeList]"===s?this.elements=Array.prototype.slice.call(t):"[object Array]"===s?this.elements=t:"[SweetyElement]"===t.toString()?this.elements=t.elements:this.elements=[t]),this},n=e.fn={create:function(e){var t=document.createElement("div");return t.innerHTML=e,t.children},find:function(e,t){var n;switch(t.substr(0,1)){case".":n=e.getElementsByClassName(t.substr(1));break;case"#":n=e.getElementById(t.substr(1));break;case"@":n=e.getElementsByName(t.substr(1));break;default:n=e.getElementsByTagName(t)}return n},each:function(e,t){for(var n=0,s=e.length;n<s;n++)t(e[n],n,e)},objEach:function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])},contains:function(e,t){return-1!==e.indexOf(t)},getClasses:function(e){return""===e.className?[]:e.className.split(/\s+/)},saveClasses:function(e,t){e.className=t.join(" ")},getStyles:function(e){var t=e.style.cssText.split(/;\s*/),n={};return this.each(t,function(e){var t=e.split(/:\s*/);2===t.length&&(n[t[0]]=t[1])}),n},saveStyles:function(e,t){var n=[];this.objEach(t,function(e,t){n.push(e+":"+t)}),e.style.cssText=n.join(";")}};return t.prototype={toArray:function(){return this.elements},findChild:function(t){return this.elements[0]?e(n.find(this.elements[0],t)):e()},findParent:function(t){if(!this.elements[0])return e();var s=this.elements[0];if(!t)return this.parent();if("."===t.substr(0,1))do{s=s.parentElement}while(!n.contains(n.getClasses(s),t.substr(1)));else do{s=s.parentElement}while(s.tagName.toUpperCase()!==t.toUpperCase());return e(s)},parent:function(){return this.elements[0]?e(this.elements[0].parentElement):e()},forEach:function(e){return n.each(this.elements,e),this},getProp:function(e){if(this.elements[0])return this.elements[0][e]},setProp:function(e,t){var s={};return"object"==typeof e?s=e:s[e]=t,this.forEach(function(e){n.objEach(s,function(t,n){e[t]=n})}),this},prop:function(e,t){return void 0!==t||"object"==typeof e?this.setProp(e,t):this.getProp(e)},getAttr:function(e){return this.elements[0]?this.elements[0].getAttribute(e):null},setAttr:function(e,t){var s={};return"[object Object]"===e.toString()?s=e:s[e]=t,this.forEach(function(e){n.objEach(s,function(t,n){e.setAttribute(t,n)})}),this},removeAttr:function(e){var t=[];return"object"==typeof e?t=e:t.push(e),this.forEach(function(e){n.each(t,function(t){e.removeAttribute(t)})}),this},hasAttr:function(e){return!!this.elements[0]&&this.elements[0].hasAttribute(e)},attr:function(e,t){return void 0!==t||"object"==typeof e?(this.setAttr(e,t),this):this.getAttr(e)},val:function(e){var t;return this.elements[0]&&"SELECT"===this.elements[0].tagName&&this.elements[0].multiple?void 0!==e?("string"==typeof e&&(e=e.split(" ")),this.findChild("option").forEach(function(t){n.contains(e,t.value)?t.selected=!0:t.selected=!1}),this):(t=[],this.findChild("option").forEach(function(e){e.selected&&t.push(e.value)}),t.length>0?t:null):this.elements[0]&&"INPUT"===this.elements[0].tagName&&"radio"===this.elements[0].type?void 0!==e?(this.forEach(function(t){t.value===e?t.checked=!0:t.checked=!1}),this):(t=null,this.forEach(function(e){e.checked&&(t=e.value)}),t):this.elements[0]&&"INPUT"===this.elements[0].tagName&&"checkbox"===this.elements[0].type?void 0!==e?("string"==typeof e&&(e=e.split(" ")),this.forEach(function(t){n.contains(e,t.value)?t.checked=!0:t.checked=!1}),this):(t=[],this.forEach(function(e){e.checked&&t.push(e.value)}),t.length>0?t:null):void 0!==this.prop("value")?this.prop("value",e):this.attr("value",e)},addClass:function(e){return"string"==typeof e&&(e=e.split(/\s+/)),this.forEach(function(t){var s=n.getClasses(t);n.each(e,function(e){-1===s.indexOf(e)&&s.push(e)}),n.saveClasses(t,s)}),this},removeClass:function(e){return"string"==typeof e&&(e=e.split(/\s+/)),this.forEach(function(t){var s=n.getClasses(t);n.each(e,function(e){var t=s.indexOf(e);-1!==t&&s.splice(t,1)}),n.saveClasses(t,s)}),this},hasClass:function(e){return!!this.elements[0]&&n.contains(n.getClasses(this.elements[0]),e)},toggleClass:function(e){return this.hasClass(e)?this.removeClass(e):this.addClass(e),this},addStyle:function(e,t){return this.forEach(function(s){var i=n.getStyles(s);void 0!==t?i[e]=t:"object"==typeof e&&n.objEach(e,function(e,t){i[e]=t}),n.saveStyles(s,i)}),this},removeStyle:function(e){return"string"==typeof e&&(e=[e]),this.forEach(function(t){var s=n.getStyles(t);n.each(e,function(e){delete s[e]}),n.saveStyles(t,s)}),this},css:function(e,t){return this.addStyle(e,t)},html:function(e){return void 0!==e?(this.empty().forEach(function(t){t.innerHTML=e}),this):this.elements[0]?this.elements[0].innerHTML:void 0},empty:function(){return this.forEach(function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}),this},append:function(e){return this.elements[0]&&e?("[SweetyElement]"===e.toString()?n.each(e.elements,function(e){this.elements[0].appendChild(e)}.bind(this)):this.elements[0].appendChild(e),this):this},remove:function(){this.forEach(function(e){e.parentNode.removeChild(e)}),this.elements=[]},on:function(e,t){return"string"==typeof e&&(e=e.split(" ")),n.each(e,function(e){this.forEach(function(n){n.addEventListener(e,t,!1),n.sweetyEvents=n.sweetyEvents||{},n.sweetyEvents[e]=n.sweetyEvents[e]||[],n.sweetyEvents[e].push(t)})}.bind(this)),this},off:function(e,t){return"string"==typeof e&&(e=e.split(" ")),n.each(e,function(e){this.forEach(function(n){t?n.removeEventListener(e,t,!1):n.sweetyEvents&&n.sweetyEvents[e]&&(n.sweetyEvents[e].forEach(function(t){n.removeEventListener(e,t,!1)}),n.sweetyEvents[e]=[])})}.bind(this)),this},exists:function(){return 0!==this.elements.length},toString:function(){return"[SweetyElement]"}},n.each(arguments,function(e){"object"==typeof e&&n.objEach(e,function(e,n){"function"==typeof n&&(t.prototype[e]=n)})}),e}(),o=parseQueryString(s.src.replace(/^[^\?]+\??/,""));i.params=o;var a="https://appevent.ru";o.url&&(a=o.url);void 0!==o.type&&o.type;r(".aeWidgetBtn").attr("href",`${a}/widget/landing?widget_key=${WIDGET_KEY}`).on("click",function(e){e.preventDefault(),i.open(WIDGET_KEY),r("body").css("overflow","hidden")}),r(".aeWidgetOpen").on("click",function(){i.open(r(this).attr("widget_key"),r(this))}),window.onmessage=function(e){"close_ae_widget"===e.data&&(console.log("Close widget"),aeWidgetIframe.remove(),r("body").removeClass("aeWidgetParentActive").css("overflow","auto"))}}(window,window.document,window.location,function(){return window.document.currentScript||(e=window.document.getElementById("aeWidgetScript"))||(e=window.document.getElementsByTagName("script"))[e.length-1];var e}());